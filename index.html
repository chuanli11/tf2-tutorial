<HTML>

<head>
    <meta charset="utf-8">
    <title>GPU Training Leaderboard</title>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <style>
      div.stickytop {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        background-color: white;
        padding: 10px;
        font-size: 20px;
      }
    </style>

    <style>
      div.stickybottom {
        position: -webkit-sticky;
        position: sticky;
        bottom: 0;
        height: 200;
        background-color: white;
        padding: 10px;
        font-size: 20px;
      }
    </style>

    <script type="text/javascript">   
      var def_filters = {
        "another": ['ToBeDone'],
        "tf2-cifarvgg": ['DataPipeline', "BuildModel", "Multi-GPU", "TensorBoard", "Train", "Evaluate", "SaveRestore"]
        }

        function get_filters(key){
          console.log("table_"+key)
          var v = document.querySelector('input[name="table_'+key+'"]:checked').value;
          return v
        }

      function loadCode(selectObject){
        $("#code").load(selectObject.value + ".html");
        create_filter(selectObject.value, def_filters[selectObject.value])

        $("#explaination").load("explaination/" + document.getElementById("codename").value + ".html");

        $("input.table_radio:radio").change(function(){
          console.log("Filters are updated")
          var key = document.getElementById("codename").value
          
          var spans = document.getElementsByClassName('codeblock');
          for (var i = 0; i < spans.length; i++) {
              var span = spans[i];
                  span.style.background = color_default;
          }   

          var key = document.getElementById("codename").value
          console.log(key)
          var span = document.getElementById(get_filters(key));
          console.log(span)
          span.style.background = color_selected;

          var target = "#" + get_filters(key)
          // console.log(target)
          $('html, body').animate({scrollTop:$(target).position().top - 200}, 'slow');

          create_explaination(get_filters(key))
        })

      }
    </script>

</head>


<BODY BGCOLOR="FFFFFF">


<div class="stickytop">
  <select onchange="loadCode(this)" id="codename">
    <option value="tf2-cifarvgg">Tensorflow 2.0 Basic Training</option>    
    <option value="another">Another example</option>
  </select>

  <div class="filterGroup fontBigger" id="filters">
  </div>
</div>

<div id="code">
</div>

<div class="stickybottom" id="explaination">
</div>


<script>

    function scrollTo(hash) {
        location.hash = "#" + hash;
        console.log(location.hash);
    }

    function jump(h){
        var url = location.href;               //Save down the URL without hash.
        location.href = "#"+h;                 //Go to the target element.
        history.replaceState(null,null,url);   //Don't like hashes. Changing it back.
    }

    function create_filter(name, items) {
      // document.getElementById("filters").innerHTML+=
      content = '<div class="filter">';
      // content += '<div class="filterName">'+name+':</div>'
      content += '<div class="btn-toolbar btn-group-toggle" data-toggle="buttons">'
      for (var i = 0; i < items.length; i++){
        var v = (items[i] == -1)?'All':items[i];
        content += '<label class="btn btn-outline-secondary">'
        content += '<input class="table_radio" type="radio" name="table_'+name+'" value="'+items[i]+'" autocomplete="off">'+v 
        console.log("table_"+name)       
        content += '</label>'
      }
      content += '</div>';
      content += '</div>';
      content += '</div>';
      document.getElementById("filters").innerHTML = content
      console.log("filters are created")
    }

    function create_explaination(name){
      $("#explaination").load("explaination/" + name + ".html"); 
    }

  
    var key = document.getElementById("codename").value
    $("#code").load(key + ".html"); 
    create_filter(key, def_filters[key])

    var color_default = 'rgb(255,255,255)'
    var color_selected = 'rgb(254,200,200)'

    $("#explaination").load("explaination/" + document.getElementById("codename").value + ".html");

    $("input.table_radio:radio").change(function(){
      console.log("Filters are updated")
      var key = document.getElementById("codename").value
      
      var spans = document.getElementsByClassName('codeblock');
      for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
              span.style.background = color_default;
      }   

      var key = document.getElementById("codename").value
      console.log(key)
      var span = document.getElementById(get_filters(key));
      console.log(span)
      span.style.background = color_selected;

      var target = "#" + get_filters(key)
      // console.log(target)
      $('html, body').animate({scrollTop:$(target).position().top - 200}, 'slow');

      create_explaination(get_filters(key))
    })

</script>


</BODY>

</HTML>